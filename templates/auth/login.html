{% extends "base.html" %}

{% block title %}登录 - EduConnect CRM{% endblock %}

{% block content %}
<div class="flex h-screen w-full items-center justify-center bg-gray-50">
    <!-- Logo in top left corner -->
    <div class="absolute top-8 left-8">
        {% set custom_logo = get_logo_url() %}
        {% if custom_logo %}
            <img src="{{ url_for('static', filename=custom_logo) }}" alt="Logo" style="width: 150px; height: 50px; object-fit: contain;">
        {% else %}
            <div class="flex items-center gap-3 text-slate-800">
                <svg class="h-6 w-6 text-[#177ccf]" fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                    <path d="M24 4C25.7818 14.2173 33.7827 22.2182 44 24C33.7827 25.7818 25.7818 33.7827 24 44C22.2182 33.7827 14.2173 25.7818 4 24C14.2173 22.2182 22.2182 14.2173 24 4Z" fill="currentColor"></path>
                </svg>
                <h1 class="text-xl font-bold">EduConnect CRM</h1>
            </div>
        {% endif %}
    </div>

    <!-- Login Form - Centered -->
    <div class="w-full max-w-md px-8">
        <div class="bg-white rounded-lg shadow-lg p-8">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold tracking-tight text-slate-900">
                    欢迎回来
                </h2>
                <p class="mt-2 text-sm text-slate-600">
                    请输入手机号登录您的账户
                </p>
            </div>

            <form method="POST" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-slate-700" for="phone">手机号</label>
                    <div class="mt-1">
                        <input
                            autocomplete="tel"
                            class="form-input block w-full appearance-none rounded-md border border-slate-300 px-4 py-3 placeholder-slate-400 shadow-sm transition focus:border-[#177ccf] focus:outline-none focus:ring-1 focus:ring-[#177ccf] sm:text-sm"
                            id="phone"
                            name="phone"
                            placeholder="请输入您的手机号"
                            required
                            type="tel"
                            maxlength="11"
                            pattern="[0-9]{11}"
                        />
                    </div>
                    <p class="mt-2 text-xs text-slate-500">我们将验证您的手机号以完成登录。</p>
                </div>

                <div>
                    <button
                        class="flex w-full justify-center rounded-md border border-transparent bg-[#177ccf] py-3 px-4 text-sm font-semibold text-white shadow-sm hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-[#177ccf] focus:ring-offset-2"
                        type="submit"
                    >
                        登录
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
// 手机号输入格式化
document.getElementById('phone').addEventListener('input', function(e) {
    let value = e.target.value.replace(/\D/g, ''); // 只保留数字
    if (value.length > 11) {
        value = value.slice(0, 11);
    }
    e.target.value = value;
});

// 表单提交验证
document.querySelector('form').addEventListener('submit', function(e) {
    const phone = document.getElementById('phone').value;
    if (!/^1[3-9]\d{9}$/.test(phone)) {
        e.preventDefault();
        alert('请输入正确的手机号格式');
        return false;
    }
});
</script>
{% endblock %}
