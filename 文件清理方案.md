# é¡¹ç›®æ–‡ä»¶æ¸…ç†æ–¹æ¡ˆ

## ğŸ“‹ å½“å‰æ–‡ä»¶åˆ†æ

### Shellè„šæœ¬æ–‡ä»¶ï¼ˆ.shï¼‰

| æ–‡ä»¶å | ç”¨é€” | çŠ¶æ€ | å»ºè®® |
|--------|------|------|------|
| **ubuntu-deploy.sh** | Ubuntuç›´æ¥éƒ¨ç½²ï¼ˆä¸»è„šæœ¬ï¼‰ | âœ… æœ‰æ•ˆ | ä¿ç•™ |
| **quick-update.sh** | å¿«é€Ÿæ›´æ–°ä»£ç  | âœ… æœ‰æ•ˆ | ä¿ç•™ |
| **health-check.sh** | å¥åº·æ£€æŸ¥ | âœ… æœ‰æ•ˆ | ä¿ç•™ |
| **backup-to-gitee.sh** | å®Œæ•´å¤‡ä»½åˆ°bakåˆ†æ”¯ | âœ… æœ‰æ•ˆ | ä¿ç•™ |
| **restore-from-bak.sh** | ä»bakåˆ†æ”¯æ¢å¤ | âœ… æœ‰æ•ˆ | ä¿ç•™ |
| **setup-git-config.sh** | Gité…ç½® | âœ… æœ‰æ•ˆ | ä¿ç•™ |
| **safe-update.sh** | å®‰å…¨æ›´æ–°ï¼ˆDockerç‰ˆï¼‰ | âš ï¸ Dockerä¸“ç”¨ | å¯é€‰ä¿ç•™ |
| **fix-git-conflict.sh** | Gitå†²çªä¿®å¤ | âœ… æœ‰æ•ˆ | ä¿ç•™ |
| **verify-update.sh** | éªŒè¯æ›´æ–° | âœ… æœ‰æ•ˆ | ä¿ç•™ |
| **setup-nginx.sh** | Nginxé…ç½®ï¼ˆæ—§ç‰ˆï¼‰ | âŒ å·²è¢«ubuntu-deploy.shåŒ…å« | åˆ é™¤ |
| **fix-nginx-static.sh** | ä¿®å¤Nginxé™æ€æ–‡ä»¶ | âŒ å·²ä¿®å¤ | åˆ é™¤ |
| **fix-permissions.sh** | ä¿®å¤æƒé™ | âŒ å·²è¢«ubuntu-deploy.shåŒ…å« | åˆ é™¤ |
| **diagnose-nginx.sh** | Nginxè¯Šæ–­ | âš ï¸ è°ƒè¯•ç”¨ | å¯é€‰ä¿ç•™ |
| **deploy.sh** | æ—§éƒ¨ç½²è„šæœ¬ | âŒ å·²åºŸå¼ƒ | åˆ é™¤ |
| **rollback-server.sh** | å›æ»šè„šæœ¬ | âŒ åŠŸèƒ½ä¸æ˜ç¡® | åˆ é™¤ |
| **fix-network.sh** | ç½‘ç»œä¿®å¤ | âŒ ä¸´æ—¶è„šæœ¬ | åˆ é™¤ |
| **setup-china-mirrors.sh** | å›½å†…é•œåƒé…ç½® | âš ï¸ å¯é€‰åŠŸèƒ½ | å¯é€‰ä¿ç•™ |
| **check-sync.sh** | åŒæ­¥æ£€æŸ¥ | âŒ å¼€å‘ç”¨ | åˆ é™¤ |
| **sync-all.sh** | åŒæ­¥æ‰€æœ‰ | âŒ å¼€å‘ç”¨ | åˆ é™¤ |

### æ–‡æ¡£æ–‡ä»¶ï¼ˆ.mdï¼‰

| æ–‡ä»¶å | ç”¨é€” | çŠ¶æ€ | å»ºè®® |
|--------|------|------|------|
| **README.md** | é¡¹ç›®è¯´æ˜ | âœ… æ ¸å¿ƒæ–‡æ¡£ | ä¿ç•™ |
| **Ubuntuç›´æ¥éƒ¨ç½²æŒ‡å—.md** | Ubuntuéƒ¨ç½²ä¸»æ–‡æ¡£ | âœ… æ ¸å¿ƒæ–‡æ¡£ | ä¿ç•™ |
| **Ubuntuéƒ¨ç½²é—®é¢˜ä¿®å¤.md** | é—®é¢˜ä¿®å¤è¯´æ˜ | âœ… é‡è¦æ–‡æ¡£ | ä¿ç•™ |
| **éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”ä¸å»ºè®®.md** | æ–¹æ¡ˆå¯¹æ¯” | âœ… é‡è¦æ–‡æ¡£ | ä¿ç•™ |
| **å¤‡ä»½æ¢å¤æŒ‡å—.md** | å¤‡ä»½æ¢å¤è¯´æ˜ | âœ… é‡è¦æ–‡æ¡£ | ä¿ç•™ |
| **æ•°æ®åº“ç®¡ç†è¯´æ˜.md** | æ•°æ®åº“ç®¡ç† | âœ… é‡è¦æ–‡æ¡£ | ä¿ç•™ |
| **å®‰å…¨æ›´æ–°ä½¿ç”¨æŒ‡å—.md** | æ›´æ–°æŒ‡å— | âœ… é‡è¦æ–‡æ¡£ | ä¿ç•™ |
| **CONFIG.md** | é…ç½®è¯´æ˜ | âœ… å‚è€ƒæ–‡æ¡£ | ä¿ç•™ |
| **REQUIREMENTS.md** | ä¾èµ–è¯´æ˜ | âœ… å‚è€ƒæ–‡æ¡£ | ä¿ç•™ |
| **æ•°æ®åº“ç»“æ„è¯´æ˜.md** | æ•°æ®åº“ç»“æ„ | âœ… å‚è€ƒæ–‡æ¡£ | ä¿ç•™ |
| **nginxé…ç½®æŒ‡å—.md** | Nginxé…ç½® | âš ï¸ å·²è¢«Ubuntuéƒ¨ç½²æŒ‡å—åŒ…å« | åˆå¹¶ååˆ é™¤ |
| **æœåŠ¡å™¨æ›´æ–°å®Œæ•´æŒ‡å—.md** | æ›´æ–°æŒ‡å—ï¼ˆæ—§ï¼‰ | âŒ é‡å¤ | åˆ é™¤ |
| **æœåŠ¡å™¨æ›´æ–°æŒ‡å—.md** | æ›´æ–°æŒ‡å—ï¼ˆæ—§ï¼‰ | âŒ é‡å¤ | åˆ é™¤ |
| **æœåŠ¡å™¨æ›´æ–°æ­¥éª¤.md** | æ›´æ–°æ­¥éª¤ï¼ˆæ—§ï¼‰ | âŒ é‡å¤ | åˆ é™¤ |
| **äº‘æœåŠ¡å™¨é…ç½®æ£€æŸ¥æŠ¥å‘Š.md** | é…ç½®æ£€æŸ¥ | âŒ ä¸´æ—¶æ–‡æ¡£ | åˆ é™¤ |
| **ä¿®å¤Nginxé™æ€æ–‡ä»¶é—®é¢˜.md** | Nginxä¿®å¤ | âŒ é—®é¢˜å·²ä¿®å¤ | åˆ é™¤ |
| **DOCKER_COMPOSE_éƒ¨ç½²æ–‡ä»¶æ¸…å•.md** | Dockeræ¸…å• | âš ï¸ Dockerä¸“ç”¨ | å¯é€‰ä¿ç•™ |
| **DEPLOY-CLOUD.md** | äº‘éƒ¨ç½²ï¼ˆæ—§ï¼‰ | âŒ å·²åºŸå¼ƒ | åˆ é™¤ |
| **CHINA-MIRRORS.md** | å›½å†…é•œåƒ | âš ï¸ å¯é€‰åŠŸèƒ½ | å¯é€‰ä¿ç•™ |

### PowerShellè„šæœ¬ï¼ˆ.ps1ï¼‰

| æ–‡ä»¶å | ç”¨é€” | çŠ¶æ€ | å»ºè®® |
|--------|------|------|------|
| **safe-update.ps1** | Windowså®‰å…¨æ›´æ–° | âš ï¸ æœ¬åœ°å¼€å‘ç”¨ | å¯é€‰ä¿ç•™ |
| **sync-all.ps1** | åŒæ­¥æ‰€æœ‰ï¼ˆWindowsï¼‰ | âŒ å¼€å‘ç”¨ | åˆ é™¤ |
| **check-sync.ps1** | åŒæ­¥æ£€æŸ¥ï¼ˆWindowsï¼‰ | âŒ å¼€å‘ç”¨ | åˆ é™¤ |
| **verify-sync.ps1** | éªŒè¯åŒæ­¥ï¼ˆWindowsï¼‰ | âŒ å¼€å‘ç”¨ | åˆ é™¤ |

### å…¶ä»–é…ç½®æ–‡ä»¶

| æ–‡ä»¶å | ç”¨é€” | çŠ¶æ€ | å»ºè®® |
|--------|------|------|------|
| **docker-compose.yml** | Dockeré…ç½® | âš ï¸ Dockerä¸“ç”¨ | å¯é€‰ä¿ç•™ |
| **Dockerfile** | Dockeré•œåƒ | âš ï¸ Dockerä¸“ç”¨ | å¯é€‰ä¿ç•™ |
| **Dockerfile.simple** | ç®€åŒ–Dockeré•œåƒ | âŒ æœªä½¿ç”¨ | åˆ é™¤ |
| **gunicorn.conf.py** | Gunicorné…ç½® | âœ… Ubuntuéƒ¨ç½²ä½¿ç”¨ | ä¿ç•™ |
| **requirements.txt** | Pythonä¾èµ– | âœ… æ ¸å¿ƒæ–‡ä»¶ | ä¿ç•™ |
| **requirements-dev.txt** | å¼€å‘ä¾èµ– | âš ï¸ å¼€å‘ç”¨ | å¯é€‰ä¿ç•™ |
| **requirements-minimal.txt** | æœ€å°ä¾èµ– | âŒ æœªä½¿ç”¨ | åˆ é™¤ |

---

## ğŸ—‘ï¸ å»ºè®®åˆ é™¤çš„æ–‡ä»¶

### å¿…é¡»åˆ é™¤ï¼ˆå·²åºŸå¼ƒ/é‡å¤ï¼‰

```bash
# Shellè„šæœ¬
rm setup-nginx.sh
rm fix-nginx-static.sh
rm fix-permissions.sh
rm deploy.sh
rm rollback-server.sh
rm fix-network.sh
rm check-sync.sh
rm sync-all.sh

# æ–‡æ¡£
rm æœåŠ¡å™¨æ›´æ–°å®Œæ•´æŒ‡å—.md
rm æœåŠ¡å™¨æ›´æ–°æŒ‡å—.md
rm æœåŠ¡å™¨æ›´æ–°æ­¥éª¤.md
rm äº‘æœåŠ¡å™¨é…ç½®æ£€æŸ¥æŠ¥å‘Š.md
rm ä¿®å¤Nginxé™æ€æ–‡ä»¶é—®é¢˜.md
rm DEPLOY-CLOUD.md

# PowerShell
rm sync-all.ps1
rm check-sync.ps1
rm verify-sync.ps1

# é…ç½®æ–‡ä»¶
rm Dockerfile.simple
rm requirements-minimal.txt
```

### å¯é€‰åˆ é™¤ï¼ˆå¦‚æœä¸ä½¿ç”¨Dockerï¼‰

```bash
# Dockerç›¸å…³
rm docker-compose.yml
rm Dockerfile
rm DOCKER_COMPOSE_éƒ¨ç½²æ–‡ä»¶æ¸…å•.md
rm safe-update.sh
rm safe-update.ps1
```

### å¯é€‰åˆ é™¤ï¼ˆå¦‚æœä¸éœ€è¦å›½å†…é•œåƒï¼‰

```bash
rm setup-china-mirrors.sh
rm CHINA-MIRRORS.md
```

---

## âœ… ä¿ç•™çš„æ ¸å¿ƒæ–‡ä»¶

### Ubuntuç›´æ¥éƒ¨ç½²æ–¹æ¡ˆï¼ˆæ¨èï¼‰

#### éƒ¨ç½²è„šæœ¬
```
ubuntu-deploy.sh          # ä¸€é”®éƒ¨ç½²è„šæœ¬
quick-update.sh           # å¿«é€Ÿæ›´æ–°è„šæœ¬
health-check.sh           # å¥åº·æ£€æŸ¥è„šæœ¬
```

#### å¤‡ä»½æ¢å¤
```
backup-to-gitee.sh        # å®Œæ•´å¤‡ä»½åˆ°bakåˆ†æ”¯
restore-from-bak.sh       # ä»bakåˆ†æ”¯æ¢å¤
```

#### è¾…åŠ©å·¥å…·
```
setup-git-config.sh       # Gité…ç½®
fix-git-conflict.sh       # Gitå†²çªä¿®å¤
verify-update.sh          # éªŒè¯æ›´æ–°
diagnose-nginx.sh         # Nginxè¯Šæ–­ï¼ˆå¯é€‰ï¼‰
```

#### æ ¸å¿ƒæ–‡æ¡£
```
README.md                 # é¡¹ç›®è¯´æ˜
Ubuntuç›´æ¥éƒ¨ç½²æŒ‡å—.md     # éƒ¨ç½²ä¸»æ–‡æ¡£
Ubuntuéƒ¨ç½²é—®é¢˜ä¿®å¤.md     # é—®é¢˜ä¿®å¤
éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”ä¸å»ºè®®.md     # æ–¹æ¡ˆå¯¹æ¯”
å¤‡ä»½æ¢å¤æŒ‡å—.md           # å¤‡ä»½æ¢å¤
æ•°æ®åº“ç®¡ç†è¯´æ˜.md         # æ•°æ®åº“ç®¡ç†
å®‰å…¨æ›´æ–°ä½¿ç”¨æŒ‡å—.md       # æ›´æ–°æŒ‡å—
```

#### å‚è€ƒæ–‡æ¡£
```
CONFIG.md                 # é…ç½®è¯´æ˜
REQUIREMENTS.md           # ä¾èµ–è¯´æ˜
æ•°æ®åº“ç»“æ„è¯´æ˜.md         # æ•°æ®åº“ç»“æ„
```

#### é…ç½®æ–‡ä»¶
```
config.py                 # Flaské…ç½®
gunicorn.conf.py          # Gunicorné…ç½®
requirements.txt          # Pythonä¾èµ–
```

---

## ğŸ“ æ¸…ç†åçš„ç›®å½•ç»“æ„

```
crm/
â”œâ”€â”€ ğŸ“œ æ ¸å¿ƒè„šæœ¬
â”‚   â”œâ”€â”€ ubuntu-deploy.sh          # Ubuntuéƒ¨ç½²
â”‚   â”œâ”€â”€ quick-update.sh           # å¿«é€Ÿæ›´æ–°
â”‚   â”œâ”€â”€ health-check.sh           # å¥åº·æ£€æŸ¥
â”‚   â”œâ”€â”€ backup-to-gitee.sh        # å¤‡ä»½
â”‚   â”œâ”€â”€ restore-from-bak.sh       # æ¢å¤
â”‚   â”œâ”€â”€ setup-git-config.sh       # Gité…ç½®
â”‚   â”œâ”€â”€ fix-git-conflict.sh       # å†²çªä¿®å¤
â”‚   â””â”€â”€ verify-update.sh          # éªŒè¯æ›´æ–°
â”‚
â”œâ”€â”€ ğŸ“š æ ¸å¿ƒæ–‡æ¡£
â”‚   â”œâ”€â”€ README.md                 # é¡¹ç›®è¯´æ˜
â”‚   â”œâ”€â”€ Ubuntuç›´æ¥éƒ¨ç½²æŒ‡å—.md     # éƒ¨ç½²æŒ‡å—
â”‚   â”œâ”€â”€ Ubuntuéƒ¨ç½²é—®é¢˜ä¿®å¤.md     # é—®é¢˜ä¿®å¤
â”‚   â”œâ”€â”€ éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”ä¸å»ºè®®.md     # æ–¹æ¡ˆå¯¹æ¯”
â”‚   â”œâ”€â”€ å¤‡ä»½æ¢å¤æŒ‡å—.md           # å¤‡ä»½æ¢å¤
â”‚   â”œâ”€â”€ æ•°æ®åº“ç®¡ç†è¯´æ˜.md         # æ•°æ®åº“ç®¡ç†
â”‚   â”œâ”€â”€ å®‰å…¨æ›´æ–°ä½¿ç”¨æŒ‡å—.md       # æ›´æ–°æŒ‡å—
â”‚   â”œâ”€â”€ CONFIG.md                 # é…ç½®è¯´æ˜
â”‚   â”œâ”€â”€ REQUIREMENTS.md           # ä¾èµ–è¯´æ˜
â”‚   â””â”€â”€ æ•°æ®åº“ç»“æ„è¯´æ˜.md         # æ•°æ®åº“ç»“æ„
â”‚
â”œâ”€â”€ âš™ï¸ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.py                 # Flaské…ç½®
â”‚   â”œâ”€â”€ gunicorn.conf.py          # Gunicorné…ç½®
â”‚   â””â”€â”€ requirements.txt          # Pythonä¾èµ–
â”‚
â”œâ”€â”€ ğŸ Pythonä»£ç 
â”‚   â”œâ”€â”€ run.py                    # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ models.py                 # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ routes/                   # è·¯ç”±
â”‚   â”œâ”€â”€ templates/                # æ¨¡æ¿
â”‚   â”œâ”€â”€ static/                   # é™æ€æ–‡ä»¶
â”‚   â””â”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚
â””â”€â”€ ğŸ’¾ æ•°æ®ç›®å½•
    â”œâ”€â”€ instance/                 # æ•°æ®åº“
    â””â”€â”€ logs/                     # æ—¥å¿—
```

---

## ğŸ”§ æ‰§è¡Œæ¸…ç†

### åˆ›å»ºæ¸…ç†è„šæœ¬

```bash
#!/bin/bash
# cleanup.sh

echo "å¼€å§‹æ¸…ç†åºŸå¼ƒæ–‡ä»¶..."

# åˆ é™¤åºŸå¼ƒçš„Shellè„šæœ¬
rm -f setup-nginx.sh
rm -f fix-nginx-static.sh
rm -f fix-permissions.sh
rm -f deploy.sh
rm -f rollback-server.sh
rm -f fix-network.sh
rm -f check-sync.sh
rm -f sync-all.sh

# åˆ é™¤åºŸå¼ƒçš„æ–‡æ¡£
rm -f æœåŠ¡å™¨æ›´æ–°å®Œæ•´æŒ‡å—.md
rm -f æœåŠ¡å™¨æ›´æ–°æŒ‡å—.md
rm -f æœåŠ¡å™¨æ›´æ–°æ­¥éª¤.md
rm -f äº‘æœåŠ¡å™¨é…ç½®æ£€æŸ¥æŠ¥å‘Š.md
rm -f ä¿®å¤Nginxé™æ€æ–‡ä»¶é—®é¢˜.md
rm -f DEPLOY-CLOUD.md

# åˆ é™¤åºŸå¼ƒçš„PowerShellè„šæœ¬
rm -f sync-all.ps1
rm -f check-sync.ps1
rm -f verify-sync.ps1

# åˆ é™¤åºŸå¼ƒçš„é…ç½®æ–‡ä»¶
rm -f Dockerfile.simple
rm -f requirements-minimal.txt

echo "âœ… æ¸…ç†å®Œæˆï¼"
echo ""
echo "å·²åˆ é™¤çš„æ–‡ä»¶ï¼š"
git status --short | grep "^ D"
```

### æäº¤æ¸…ç†

```bash
# æ‰§è¡Œæ¸…ç†
bash cleanup.sh

# æŸ¥çœ‹åˆ é™¤çš„æ–‡ä»¶
git status

# æäº¤æ¸…ç†
git add -A
git commit -m "chore: æ¸…ç†åºŸå¼ƒæ–‡ä»¶ï¼Œä¿ç•™Ubuntuç›´æ¥éƒ¨ç½²æ–¹æ¡ˆçš„æ ¸å¿ƒæ–‡ä»¶"
git push origin master
```

---

## ğŸ“Š æ¸…ç†æ•ˆæœ

### æ¸…ç†å‰
- Shellè„šæœ¬: 19ä¸ª
- æ–‡æ¡£æ–‡ä»¶: 19ä¸ª
- æ€»è®¡: 38ä¸ªæ–‡ä»¶

### æ¸…ç†å
- Shellè„šæœ¬: 8ä¸ªï¼ˆæ ¸å¿ƒï¼‰
- æ–‡æ¡£æ–‡ä»¶: 10ä¸ªï¼ˆæ ¸å¿ƒï¼‰
- æ€»è®¡: 18ä¸ªæ–‡ä»¶

**å‡å°‘**: 20ä¸ªæ–‡ä»¶ï¼ˆçº¦53%ï¼‰

---

## ğŸ’¡ å»ºè®®

### 1. å¦‚æœåªä½¿ç”¨Ubuntuç›´æ¥éƒ¨ç½²

**åˆ é™¤Dockerç›¸å…³**ï¼š
```bash
rm docker-compose.yml
rm Dockerfile
rm DOCKER_COMPOSE_éƒ¨ç½²æ–‡ä»¶æ¸…å•.md
rm safe-update.sh
rm safe-update.ps1
```

### 2. å¦‚æœåœ¨å›½å†…æœåŠ¡å™¨

**ä¿ç•™é•œåƒé…ç½®**ï¼š
```bash
# ä¿ç•™è¿™äº›æ–‡ä»¶
setup-china-mirrors.sh
CHINA-MIRRORS.md
```

### 3. å¦‚æœéœ€è¦è°ƒè¯•

**ä¿ç•™è¯Šæ–­å·¥å…·**ï¼š
```bash
# ä¿ç•™è¿™ä¸ªæ–‡ä»¶
diagnose-nginx.sh
```

---

## ğŸ¯ æœ€ç»ˆæ¨èé…ç½®

### æœ€å°åŒ–é…ç½®ï¼ˆåªä¿ç•™å¿…éœ€ï¼‰

```
æ ¸å¿ƒè„šæœ¬ï¼ˆ8ä¸ªï¼‰ï¼š
- ubuntu-deploy.sh
- quick-update.sh
- health-check.sh
- backup-to-gitee.sh
- restore-from-bak.sh
- setup-git-config.sh
- fix-git-conflict.sh
- verify-update.sh

æ ¸å¿ƒæ–‡æ¡£ï¼ˆ10ä¸ªï¼‰ï¼š
- README.md
- Ubuntuç›´æ¥éƒ¨ç½²æŒ‡å—.md
- Ubuntuéƒ¨ç½²é—®é¢˜ä¿®å¤.md
- éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”ä¸å»ºè®®.md
- å¤‡ä»½æ¢å¤æŒ‡å—.md
- æ•°æ®åº“ç®¡ç†è¯´æ˜.md
- å®‰å…¨æ›´æ–°ä½¿ç”¨æŒ‡å—.md
- CONFIG.md
- REQUIREMENTS.md
- æ•°æ®åº“ç»“æ„è¯´æ˜.md

é…ç½®æ–‡ä»¶ï¼ˆ3ä¸ªï¼‰ï¼š
- config.py
- gunicorn.conf.py
- requirements.txt
```

**æ€»è®¡**: 21ä¸ªæ ¸å¿ƒæ–‡ä»¶

---

**æœ€åæ›´æ–°**: 2025-01-02  
**ç‰ˆæœ¬**: 1.0

